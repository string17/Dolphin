
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    IEnumerable<DolphinContext.Data.Models.DolRole> Model_Role = ViewBag.Roles;
    int sn = 0;
}

<!-- The following CSS are included as plugins and can be removed if unused-->

<link type="text/css" href="~/assets/plugins/datatables/dataTables.css" rel="stylesheet">
<link type="text/css" href="~/assets/plugins/datatables/ColReorder/css/dataTables.colReorder.css" rel="stylesheet"> 	<!-- ColReorder -->
<link type="text/css" href="~/assets/plugins/datatables/KeyTable/css/dataTables.keyTable.css" rel="stylesheet"> 		<!-- KeyTable -->
<link type="text/css" href="~/assets/plugins/datatables/dataTables.bootstrap.css" rel="stylesheet"> 					<!-- Bootstrap Support for Datatables -->
<link type="text/css" href="~/assets/plugins/datatables/dataTables.fontAwesome.css" rel="stylesheet"> 					<!-- FontAwesome Support for Datatables -->


@{if (!String.IsNullOrEmpty(@ViewBag.ErrorMsg))
            {
        <div id="ErrorBox" style="margin:auto">
            <div class="alert alert-dismissable alert-danger" style="margin-top:10px;">
                <i class="fa fa-fw fa-times"></i>&nbsp; <strong></strong> @ViewBag.ErrorMsg
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            </div>
        </div>
    }

    else if (!String.IsNullOrEmpty(@ViewBag.SuccessMsg))
    {
        <div id="ErrorBox" style="margin:auto">
            <div class="alert alert-dismissable alert-success" style="margin-top:10px;">
                <i class="fa fa-fw fa-times"></i>&nbsp; <strong></strong> @ViewBag.SuccessMsg
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
            </div>
        </div>
    }

}
<div class="row" data-widget-group="group1">
    <div class="col-md-12">

        <div class="panel panel-default" id="panel-tabletools" data-widget='{"draggable":"false"}'>
            <div class="panel-heading">
                <h2><a href="#create_role" data-toggle="modal">Create Role</a> </h2>
                <div class="panel-ctrls"
                     data-actions-container="" ;
                     data-action-collapse='{"target": ".panel-body"}'
                     data-action-expand=''
                     data-action-colorpicker=''>
                </div>
            </div>
            <div class="panel-editbox" data-widget-controls=""></div>
            <div class="panel-body panel-no-padding">
                <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered datatables" id="tabletools">
                    <thead>
                        <tr>
                            <th>SN</th>
                            <th>Title</th>
                            <th>Description</th>
                            <th>Status</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>


                        @foreach (var n in Model_Role)
                        {

                            sn += 1;
                            <tr class="odd gradeX">
                                <td>@sn</td>
                                <td>@n.RoleName</td>
                                <td>@n.RoleDesc</td>
                                <td>@n.RoleStatus</td>
                                <td>
                                    <a href="#viewDetails" data-toggle="modal">Details </a>
                                    <a href="#" data-toggle="modal" onclick="+ EditRole(RoleId=@n.RoleId)+">Edit </a>

                                </td>

                                @*<td><a data-toggle="modal" href="@Url.Action("#myModal", new { Id = @n.RoleId })" id="editRole">Edit</a></td>*@


                            </tr>

                        }


                    </tbody>
                </table>

                <div class="panel-footer"></div>
            </div>
        </div>

      
    </div>


</div>

  <!-- Modal -->
<div class="modal fade" id="create_role" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog" id="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h2 class="modal-title" id="modal-title">@ViewBag.Message</h2>
            </div>
            <form class="form-horizontal row-border" id="validate-form" data-parsley-validate method="post" action="/dolphin/Create_Role">
                <div class="modal-body">

                    <div class="col-md-12">


                        <div class="form-group">
                            <label class="col-sm-3 control-label">Title</label>
                            <div class="col-sm-6">
                                <input type="text" placeholder="Title" required class="form-control" name="RoleName">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">Description</label>
                            <div class="col-sm-6">
                                <input type="text" placeholder="Description" required class="form-control" name="RoleDesc">
                            </div>
                        </div>


                        <div class="form-group pb10">
                            <label class="col-sm-3 control-label">Status</label>
                            <div class="col-sm-6">
                                <ul class="demo-btns mb-10">
                                    <li><input class="bootstrap-switch" name="RoleStatus" Value="true" type="checkbox" data-on-text="<i class='fa fa-check'></i>" data-on-color="success" data-off-text="<i class='fa fa-times'></i>" data-off-color="danger" /></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <hr>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div><!-- /.modal-content -->


    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- Modal -->
<div class="modal fade" id="create_role" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h2 class="modal-title">@ViewBag.Message</h2>
      

            </div>
            <form class="form-horizontal row-border" id="validate-form" data-parsley-validate method="post" action="/dolphin/Create_Role">
                <div class="modal-body">

                    <div class="col-md-12">


                        <div class="form-group">
                            <label class="col-sm-3 control-label">Title</label>
                            <div class="col-sm-6">
                                <input type="text" placeholder="Title" required class="form-control" name="RoleName">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">Description</label>
                            <div class="col-sm-6">
                                <input type="text" placeholder="Description" required class="form-control" name="RoleDesc">
                            </div>
                        </div>


                        <div class="form-group pb10">
                            <label class="col-sm-3 control-label">Status</label>
                            <div class="col-sm-6">
                                <ul class="demo-btns mb-10">
                                    <li><input class="bootstrap-switch" name="RoleStatus" Value="true" type="checkbox" data-on-text="<i class='fa fa-check'></i>" data-on-color="success" data-off-text="<i class='fa fa-times'></i>" data-off-color="danger" /></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <hr>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div><!-- /.modal-content -->


    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->
<!-- Modal -->
<div class="modal fade" id="MyModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h2 class="modal-title"></h2>
            </div>
            <form class="form-horizontal row-border" id="form" data-parsley-validate method="post" action="/dolphin/view_role">
                <div class="modal-body">

                    <div class="col-md-12">


                        <div class="form-group">

                            <label class="col-sm-3 control-label">Title</label>
                            <div class="col-sm-6">
                                <input type="text" placeholder="Title" class="form-control" id="RoleName" name="RoleName">
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="col-sm-3 control-label">Description</label>
                            <div class="col-sm-6">
                                <input type="text" placeholder="Description" class="form-control" id="RoleDesc" name="RoleDesc">
                            </div>
                        </div>


                        <div class="form-group pb10">
                            <label class="col-sm-3 control-label">Status</label>
                            <div class="col-sm-6">
                                <ul class="demo-btns mb-10">
                                    <li><input class="bootstrap-switch" name="RoleStatus" id="RoleStatus" Value="true" type="checkbox" data-on-text="<i class='fa fa-check'></i>" data-on-color="success" data-off-text="<i class='fa fa-times'></i>" data-off-color="danger" /></li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <hr>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" id="Edit_Role">Save</button>
                </div>
            </form>
        </div><!-- /.modal-content -->


    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


@*<script>
    $("#LoadingStatus").html("Loading....");
    $.get("/View_Role/GetRoleById", null, DataBind);
    function EditRole(RoleId) {
        var url = "dolphin/getRoleById?RoleId=" + RoleId;
        $("#MyModal").modal();
        $.ajax({
            type: "GET ",
            url: url,
            success:function(data){
                var obj = JSON(data);
                $("#RoleId").val(obj.RoleId);
                $("#RoleName").val(obj.RoleName);
                $("#RoleDesc").val(obj.RoleDesc);
                $("#CheckBox:Checked").val(obj.RoleStatus);

            }

        })

        //$("#validate-form")[0].reset();
        //$("#modal-title").html("New Role");
        //$("modal-dialog").modal();
    }

</script>*@



